{"version":3,"sources":["assets/scripts/Game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","maxStartDuration","minStartDuration","groud","Node","player","scoreDisplay","Label","onLoad","score","groudY","y","height","spawnNewStar","newStar","instantiate","getComponent","game","node","addChild","setPosition","getNewStarPosition","randX","randY","Math","random","jumpHeight","maxX","width","v2","start","gainScore","string"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAELC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFD,KADJ;AAKRC,IAAAA,gBAAgB,EAAE,CALV;AAMRC,IAAAA,gBAAgB,EAAE,CANV;AAQRC,IAAAA,KAAK,EAAE;AACH,iBAAS,IADN;AAEHJ,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFN,KARC;AAYRC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJN,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFL,KAZA;AAgBRE,IAAAA,YAAY,EAAE;AACV,iBAAS,IADC;AAEVP,MAAAA,IAAI,EAAEL,EAAE,CAACa;AAFC;AAhBN,GAFP;AAwBL;AAEAC,EAAAA,MA1BK,oBA0BK;AACN,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,MAAL,GAAc,KAAKP,KAAL,CAAWQ,CAAX,GAAe,KAAKR,KAAL,CAAWS,MAAX,GAAkB,CAA/C;AACA,SAAKC,YAAL;AACH,GA9BI;AA+BLA,EAAAA,YA/BK,0BA+BS;AACV,QAAIC,OAAO,GAAGpB,EAAE,CAACqB,WAAH,CAAe,KAAKjB,UAApB,CAAd;AACAgB,IAAAA,OAAO,CAACE,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACA,SAAKC,IAAL,CAAUC,QAAV,CAAmBL,OAAnB;AAEAA,IAAAA,OAAO,CAACM,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AACH,GArCI;AAsCLA,EAAAA,kBAtCK,gCAsCe;AAChB,QAAIC,KAAK,GAAG,CAAZ;AAEA,QAAIC,KAAK,GAAG,KAAKb,MAAL,GAAcc,IAAI,CAACC,MAAL,GAAc,KAAKpB,MAAL,CAAYW,YAAZ,CAAyB,QAAzB,EAAmCU,UAA/D,GAA4E,EAAxF;AAEA,QAAIC,IAAI,GAAG,KAAKT,IAAL,CAAUU,KAAV,GAAkB,CAA7B;AAEAN,IAAAA,KAAK,GAAG,CAACE,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAuB,CAAvB,GAA0BE,IAAlC;AACA,WAAOjC,EAAE,CAACmC,EAAH,CAAMP,KAAN,EAAaC,KAAb,CAAP;AACH,GA/CI;AAgDLO,EAAAA,KAhDK,mBAgDI,CAER,CAlDI;AAmDLC,EAAAA,SAnDK,uBAmDQ;AACT,SAAKtB,KAAL,IAAc,CAAd,CADS,CAET;;AACA,SAAKH,YAAL,CAAkB0B,MAAlB,GAA2B,YAAY,KAAKvB,KAA5C;AACH,GAvDI,CAwDL;;AAxDK,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        starPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        maxStartDuration: 0,\n        minStartDuration: 0,\n\n        groud: {\n            default: null,\n            type: cc.Node\n        },\n        player: {\n            default: null,\n            type: cc.Node\n        },\n        scoreDisplay: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.score = 0\n        this.groudY = this.groud.y + this.groud.height/2\n        this.spawnNewStar()\n    },\n    spawnNewStar(){\n        let newStar = cc.instantiate(this.starPrefab)\n        newStar.getComponent('Star').game = this\n        this.node.addChild(newStar)\n\n        newStar.setPosition(this.getNewStarPosition())\n    },\n    getNewStarPosition(){\n        let randX = 0\n\n        let randY = this.groudY + Math.random * this.player.getComponent('Player').jumpHeight + 50\n\n        let maxX = this.node.width / 2\n\n        randX = (Math.random() - 0.5) *2 *maxX\n        return cc.v2(randX, randY)\n    },\n    start () {\n\n    },\n    gainScore () {\n        this.score += 1;\n        // 更新 scoreDisplay Label 的文字\n        this.scoreDisplay.string = 'Score: ' + this.score;\n    },\n    // update (dt) {},\n});\n"]}