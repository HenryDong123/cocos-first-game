{"version":3,"sources":["assets/scripts/Game.js"],"names":["cc","Class","Component","properties","starPrefab","type","Prefab","maxStartDuration","minStartDuration","groud","Node","player","scoreDisplay","Label","onLoad","score","groudY","y","height","timer","startDuration","spawnNewStar","newStar","instantiate","getComponent","game","node","addChild","setPosition","getNewStarPosition","Math","random","randX","randY","jumpHeight","maxX","width","v2","start","gainScore","string","gameOver","stopAllActions","director","loadScene","update","dt"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAELC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAE;AACR,iBAAS,IADD;AAERC,MAAAA,IAAI,EAAEL,EAAE,CAACM;AAFD,KADJ;AAKRC,IAAAA,gBAAgB,EAAE,CALV;AAMRC,IAAAA,gBAAgB,EAAE,CANV;AAQRC,IAAAA,KAAK,EAAE;AACH,iBAAS,IADN;AAEHJ,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFN,KARC;AAYRC,IAAAA,MAAM,EAAE;AACJ,iBAAS,IADL;AAEJN,MAAAA,IAAI,EAAEL,EAAE,CAACU;AAFL,KAZA;AAgBRE,IAAAA,YAAY,EAAE;AACV,iBAAS,IADC;AAEVP,MAAAA,IAAI,EAAEL,EAAE,CAACa;AAFC;AAhBN,GAFP;AAwBL;AAEAC,EAAAA,MA1BK,oBA0BK;AACN,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,MAAL,GAAc,KAAKP,KAAL,CAAWQ,CAAX,GAAe,KAAKR,KAAL,CAAWS,MAAX,GAAkB,CAA/C;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,aAAL,GAAqB,CAArB;AACA,SAAKC,YAAL;AACA,SAAKN,KAAL,GAAa,CAAb;AACH,GAjCI;AAkCLM,EAAAA,YAlCK,0BAkCS;AACV,QAAIC,OAAO,GAAGtB,EAAE,CAACuB,WAAH,CAAe,KAAKnB,UAApB,CAAd;AACAkB,IAAAA,OAAO,CAACE,YAAR,CAAqB,MAArB,EAA6BC,IAA7B,GAAoC,IAApC;AACA,SAAKC,IAAL,CAAUC,QAAV,CAAmBL,OAAnB;AAEAA,IAAAA,OAAO,CAACM,WAAR,CAAoB,KAAKC,kBAAL,EAApB;AACA,SAAKT,aAAL,GAAqB,KAAKZ,gBAAL,GAAwBsB,IAAI,CAACC,MAAL,MAAiB,KAAKxB,gBAAL,GAAwB,KAAKC,gBAA9C,CAA7C;AACA,SAAKW,KAAL,GAAa,CAAb;AACR;AAAM,GA1CG;AA2CLU,EAAAA,kBA3CK,gCA2Ce;AAChB,QAAIG,KAAK,GAAG,CAAZ;AAEA,QAAIC,KAAK,GAAG,KAAKjB,MAAL,GAAcc,IAAI,CAACC,MAAL,GAAc,KAAKpB,MAAL,CAAYa,YAAZ,CAAyB,QAAzB,EAAmCU,UAA/D,GAA4E,EAAxF;AAEA,QAAIC,IAAI,GAAG,KAAKT,IAAL,CAAUU,KAAV,GAAkB,CAA7B;AAEAJ,IAAAA,KAAK,GAAG,CAACF,IAAI,CAACC,MAAL,KAAgB,GAAjB,IAAuB,CAAvB,GAA0BI,IAAlC;AACA,WAAOnC,EAAE,CAACqC,EAAH,CAAML,KAAN,EAAaC,KAAb,CAAP;AACH,GApDI;AAqDLK,EAAAA,KArDK,mBAqDI,CAER,CAvDI;AAwDLC,EAAAA,SAxDK,uBAwDQ;AACT,SAAKxB,KAAL,IAAc,CAAd,CADS,CAET;;AACA,SAAKH,YAAL,CAAkB4B,MAAlB,GAA2B,YAAY,KAAKzB,KAA5C;AACH,GA5DI;AA6DL0B,EAAAA,QA7DK,sBA6DK;AACR,SAAK9B,MAAL,CAAY+B,cAAZ;AACA1C,IAAAA,EAAE,CAAC2C,QAAH,CAAYC,SAAZ,CAAsB,MAAtB;AACD,GAhEI;AAiELC,EAAAA,MAjEK,kBAiEGC,EAjEH,EAiEO;AACR,QAAI,KAAK3B,KAAL,GAAa,KAAKC,aAAtB,EAAoC;AAChC,WAAKqB,QAAL;AACA;AACH;;AACD,SAAKtB,KAAL,IAAc2B,EAAd;AACH;AAvEI,CAAT","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\n//  - https://docs.cocos.com/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n    properties: {\n        starPrefab: {\n            default: null,\n            type: cc.Prefab\n        },\n        maxStartDuration: 0,\n        minStartDuration: 0,\n\n        groud: {\n            default: null,\n            type: cc.Node\n        },\n        player: {\n            default: null,\n            type: cc.Node\n        },\n        scoreDisplay: {\n            default: null,\n            type: cc.Label\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.score = 0\n        this.groudY = this.groud.y + this.groud.height/2\n        this.timer = 0\n        this.startDuration = 0\n        this.spawnNewStar()\n        this.score = 0\n    },\n    spawnNewStar(){\n        let newStar = cc.instantiate(this.starPrefab)\n        newStar.getComponent('Star').game = this\n        this.node.addChild(newStar)\n\n        newStar.setPosition(this.getNewStarPosition())\n        this.startDuration = this.minStartDuration + Math.random() * (this.maxStartDuration - this.minStartDuration)\n        this.timer = 0\n0    },\n    getNewStarPosition(){\n        let randX = 0\n\n        let randY = this.groudY + Math.random * this.player.getComponent('Player').jumpHeight + 50\n\n        let maxX = this.node.width / 2\n\n        randX = (Math.random() - 0.5) *2 *maxX\n        return cc.v2(randX, randY)\n    },\n    start () {\n\n    },\n    gainScore () {\n        this.score += 1;\n        // 更新 scoreDisplay Label 的文字\n        this.scoreDisplay.string = 'Score: ' + this.score;\n    },\n    gameOver(){\n      this.player.stopAllActions()\n      cc.director.loadScene('game')\n    },\n    update (dt) {\n        if (this.timer > this.startDuration){\n            this.gameOver()\n            return\n        }\n        this.timer += dt\n    },\n});\n"]}